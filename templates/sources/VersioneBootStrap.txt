package it.algos.@LOWERPACK@;

import it.algos.webbase.web.lib.LibVers;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

/**
 * Log delle versioni, modifiche e patch installate
 * Executed on container startup
 * Setup non-UI logic here
 * È OBBLIGATORIO aggiungere questa classe nei listeners del file web.WEB-INF.web.xml
 */
public class VersioneBootStrap implements ServletContextListener{

     /**
      * Executed on container startup
      * Setup non-UI logic here
      * <p>
   	 * This method is called prior to the servlet context being
   	 * initialized (when the Web application is deployed).
   	 * You can initialize servlet context related data here.
      * <p>
      * Viene normalmente sovrascritta dalla sottoclasse:
      *  - per controllare i ruoli base esistenti e creare quelli eventualmente mancanti <br>
      *  - per controllare gli utenti abilitati esistenti e creare quelli eventualmente mancanti <br>
      */
   /**
     * This method is called prior to the servlet context being
     * initialized (when the Web application is deployed).
     * You can initialize servlet context related data here.
     * <p>
     * Tutte le aggiunte, modifiche e patch vengono inserite con una versione <br>
     * L'ordine di inserimento è FONDAMENTALE
     * <p>
     * Se le versioni aumentano, conviene spostare in una classe esterna
     */
    @Override
    public void contextInitialized(ServletContextEvent contextEvent) {

        //--prima installazione del programma
        //--non fa nulla, solo informativo
        if (LibVers.installa(1)) {
            LibVers.nuova("Setup", "Installazione iniziale");
        }// fine del blocco if

    }// end of method


    /**
     * This method is invoked when the Servlet Context
     * (the Web application) is undeployed or
     * WebLogic Server shuts down.
     */
    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) {
    }// end of method

}// end of class
